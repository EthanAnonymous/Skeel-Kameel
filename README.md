# Overberg Transport Connect

A modern web application for transport services built with React, TypeScript, and Tailwind CSS.

## Project Setup

This project is set up as a static site optimized for deployment on GitHub Pages.

## Requirements

- Node.js & npm installed (for local development and building)
- Git installed
- GitHub account with a repository

## Getting Started

### Build Setup

```sh
# Step 1: Navigate to the project directory
cd overberg-transport-connect-main

# Step 2: Install dependencies
npm install

# Step 3: Build the application
npm run build
```

### Deploy to GitHub Pages

1. **Build locally**: `npm run build` (creates optimized `dist/` folder)
2. **Push to repository**: 
   ```sh
   git add .
   git commit -m "Build for GitHub Pages"
   git push origin main
   ```
3. **Enable GitHub Pages**:
   - Go to your repository settings
   - Navigate to "Pages" section
   - Set source to `main` branch and `/root` directory
   - Your site will be available at `https://yourusername.github.io/repository-name/`

### How It Works

- Vite builds the React app into static HTML/CSS/JS files
- The `dist/` folder contains all static assets
- GitHub Pages serves these files directly
- React Router handles client-side navigation automatically

## Development

### Available Scripts

- `npm run build` - Build for production (creates optimized `dist/` folder)
- `npm run build:dev` - Build in development mode
- `npm run lint` - Run ESLint to check code quality
- `npm test` - Run tests once
- `npm run test:watch` - Run tests in watch mode

### How it Works

1. **React SPA Build**: `npm run build` creates an optimized production build in the `dist/` folder
2. **Static Site**: GitHub Pages serves the built files as static HTML/CSS/JS
3. **Client-Side Routing**: React Router handles all navigation in the browser
4. **No Server Required**: Everything runs in the browser - no backend server needed for the UI

## Technologies

This project is built with:

- **Vite** - Build tool (compiles React to static files)
- **TypeScript** - Type-safe JavaScript
- **React** - UI library
- **shadcn-ui** - High-quality UI components
- **Tailwind CSS** - Utility-first CSS framework
- **React Hook Form** - Performant form handling
- **React Query** - Data fetching and caching
- **React Router** - Client-side navigation

## Features

### Booking System
- **Online Booking Form**: Customers can book rides directly through the web interface
- **Vehicle Selection**: Choose between Standard, Premium, and Van options
- **Fare Estimation**: Real-time fare calculation based on vehicle type
- **Booking Status Tracking**: Monitor pending, confirmed, completed, and cancelled bookings
- **Booking History**: View all previous bookings with detailed information

### Invoicing System
- **Auto-Generated Invoices**: Invoices are automatically created when bookings are submitted
- **Itemized Charges**: Professional invoice layout with itemized service charges
- **Tax Calculation**: 15% tax automatically applied to all invoices
- **Payment Status**: Track invoice payment status (unpaid, paid, overdue)
- **PDF Export**: Download invoices as PDF (placeholder for backend implementation)
- **Email Integration**: Send invoices via email (placeholder for backend implementation)

## Project Structure

```
src/
├── components/
│   ├── ui/                    # shadcn-ui components
│   ├── BookingForm.tsx        # Main booking form component
│   ├── InvoiceDisplay.tsx     # Invoice display component
│   ├── ContactForm.tsx
│   ├── Footer.tsx
│   ├── Hero.tsx
│   ├── NavLink.tsx
│   ├── RateCard.tsx
│   └── ReassuranceBar.tsx
├── hooks/                     # Custom React hooks
├── lib/
│   ├── utils.ts              # Utility functions
│   └── booking-utils.ts      # Booking & invoice utilities
├── pages/
│   ├── Index.tsx             # Home page
│   ├── BookingPage.tsx       # Booking & invoicing page
│   └── NotFound.tsx
├── types/
│   └── booking.ts            # TypeScript types for bookings & invoices
├── App.tsx                    # Root component
└── main.tsx                   # Entry point

dist/                          # Build output (generated by npm run build)
server.js                      # Development server (local only)
```

## Deployment on GitHub Pages

The application is pre-configured for GitHub Pages deployment:

1. **Build**: Run `npm run build` locally
2. **Push**: Commit and push the built files to your GitHub repository
3. **Enable**: Go to repository Settings → Pages → select main branch
4. **Deploy**: GitHub automatically deploys the `dist/` folder
5. **URL**: Access at `https://yourusername.github.io/repository-name/`

## Database & Backend Integration

### Current Implementation: Firebase

The application is now integrated with **Firebase** for persistent data storage. All bookings and invoices are automatically saved to your Firebase Firestore database.

### Firebase Setup Instructions

#### Step 1: Create a Firebase Project

1. Go to [Firebase Console](https://console.firebase.google.com/)
2. Click "Create a new project"
3. Enter project name: `overberg-transport-connect`
4. Enable Google Analytics (optional)
5. Create the project

#### Step 2: Create a Web App

1. In Firebase Console, click "Create app"
2. Select "Web" (</>)
3. Register app name: `Overberg Transport`
4. Copy your Firebase configuration

#### Step 3: Get Your Credentials

After creating the web app, you'll see configuration like:

```javascript
const firebaseConfig = {
  apiKey: "AIzaSyD...",
  authDomain: "your-project.firebaseapp.com",
  projectId: "your-project-id",
  storageBucket: "your-project.appspot.com",
  messagingSenderId: "123456789",
  appId: "1:123456789:web:abcdef123456"
};
```

#### Step 4: Add Environment Variables

1. Copy `.env.example` to `.env.local`:
   ```sh
   cp .env.example .env.local
   ```

2. Edit `.env.local` and add your Firebase credentials:
   ```
   VITE_FIREBASE_API_KEY=your_api_key
   VITE_FIREBASE_AUTH_DOMAIN=your_project.firebaseapp.com
   VITE_FIREBASE_PROJECT_ID=your_project_id
   VITE_FIREBASE_STORAGE_BUCKET=your_project.appspot.com
   VITE_FIREBASE_MESSAGING_SENDER_ID=your_sender_id
   VITE_FIREBASE_APP_ID=your_app_id
   ```

**⚠️ Important**: Never commit `.env.local` to Git. It's already in `.gitignore`.

#### Step 5: Enable Firestore Database

1. In Firebase Console, go to "Build" > "Firestore Database"
2. Click "Create database"
3. Select "Start in production mode"
4. Choose your preferred region
5. Click "Create"

#### Step 6: Set Firestore Security Rules

1. Go to "Firestore Database" > "Rules"
2. Replace the default rules with:

```
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    // Anyone can read and write bookings
    match /bookings/{document=**} {
      allow read, write: if true;
    }
    // Anyone can read and write invoices
    match /invoices/{document=**} {
      allow read, write: if true;
    }
  }
}
```

⚠️ **Security Note**: These rules allow open access for development. For production, implement proper authentication.

### Features Now Enabled

✅ **Persistent Booking Storage** - Bookings save to Firebase Firestore
✅ **Auto-Generated Invoices** - Invoices created and stored automatically  
✅ **Booking History** - All bookings loaded and displayed
✅ **Status Updates** - Update booking status (pending → confirmed → completed)
✅ **Booking Cancellation** - Cancel bookings directly from the UI
✅ **Real-time Sync** - Changes reflect immediately across sessions

### Accessing Your Data

#### Option 1: Firebase Console Dashboard
1. Go to [Firebase Console](https://console.firebase.google.com/)
2. Select your project
3. Go to "Firestore Database"
4. View collections: `bookings` and `invoices`
5. See all stored data in real-time

#### Option 2: Build an Admin Dashboard (Future)
Create a private admin interface to:
- View all bookings and invoices
- Update payment status
- Generate reports
- Export data

### Future Enhancements

- **Authentication**: Add user login for passenger history
- **Email Notifications**: Send booking confirmations and invoices
- **Payment Integration**: Add payment processing (Stripe, PayFast)
- **PDF Generation**: Generate invoice PDFs
- **Admin Panel**: Manage bookings and view statistics

### Troubleshooting

- **Blank page**: Ensure `npm run build` was run successfully and `dist/` folder exists
- **Firebase connection errors**: Check `.env.local` is properly configured with Firebase credentials
- **"Failed to load bookings" error**: Verify Firestore database is enabled and security rules are set
- **404 errors on routes**: GitHub Pages will route all URLs to `index.html` for client-side routing
- **Bookings not appearing**: Check browser console for Firebase errors, ensure `.env.local` is loaded
- **CORS errors**: Not an issue with Firebase - it handles cross-origin requests
- **Environment variables not loading**: Restart dev server after updating `.env.local`

## License

MIT
